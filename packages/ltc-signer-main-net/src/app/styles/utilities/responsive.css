/* === PHASE 7: RESPONSIVE DESIGN ORGANIZATION === */
/* Centralized responsive design system for the entire application */

/* === 1. SYSTEMATIC BREAKPOINT STRATEGY === */
/* Industry-standard, device-agnostic breakpoints using logical units */
/* Mobile-first approach with progressive enhancement */

/* Small phones and very small screens */
@media (min-width: 20em) {
  /* 320px */
}

/* Large phones and small tablets */
@media (min-width: 30em) {
  /* 480px */

  .helper-modal {
    max-width: 450px;
  }
}

/* Tablets */
@media (min-width: 48em) {
  /* 768px */

  .helper-modal {
    max-width: 500px;
  }
}

/* Small desktops */
@media (min-width: 64em) {
  /* 1024px */

  .helper-modal {
    max-width: 550px;
  }
}

/* Large desktops */
@media (min-width: 80em) {
  /* 1280px */

  .helper-modal {
    max-width: 600px;
  }
}

/* Ultra-wide screens */
@media (min-width: 90em) {
  /* 1440px */

  .helper-modal {
    max-width: 650px;
  }
}

/* High-DPI displays and accessibility */
@media (min-resolution: 2dppx) {
  .helper-modal {
    border-width: 0.5px;
  }
}

/* === 2. CONTAINER QUERY SYSTEM === */
/* Component-based scaling using container queries */

/* Scale action cards based on container size, not viewport */
/* Scale helper modal based on container size */
@container main (max-width: 25em) {
  /* 400px */
  .helper-modal {
    max-width: 350px;
    padding: var(--space-lg);
  }

  .helper-modal-header h4 {
    font-size: var(--font-size-lg);
  }

  .explanation-text {
    font-size: var(--font-size-sm);
  }
}

@container main (max-width: 23.4375em) {
  /* 375px */
  .helper-modal {
    max-width: 320px;
    padding: var(--space-md);
  }

  .helper-modal-header h4 {
    font-size: var(--font-size-md);
  }

  .explanation-text {
    font-size: var(--font-size-xs);
  }

  .modal-close-btn {
    padding: var(--space-xs) var(--space-md);
    font-size: var(--font-size-xs);
  }
}

@container main (max-width: 25em) {
  /* 400px */
  .action-card {
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-sm);
  }

  .action-card .card-icon {
    width: var(--icon-lg);
    height: var(--icon-lg);
  }

  .action-card h3 {
    font-size: var(--font-size-md);
  }

  .card-content {
    padding: 0.4rem 0;
    gap: 0.6rem;
  }

  .card-icon {
    margin-bottom: var(--space-sm);
  }
}

@container main (max-width: 23.4375em) {
  /* 375px */
  .action-card {
    border-radius: var(--radius-md);
    padding: var(--space-sm);
  }

  .action-card .card-icon {
    width: var(--icon-md);
    height: var(--icon-md);
  }

  .action-card h3 {
    font-size: var(--font-size-sm);
  }

  .card-content {
    padding: 0.3rem 0;
    gap: 0.5rem;
  }

  .card-icon {
    margin-bottom: var(--space-xs);
  }
}

@container main (max-width: 20em) {
  /* 320px */
  .action-card {
    padding: var(--space-xs);
  }

  .action-card .card-icon {
    width: var(--icon-sm);
    height: var(--icon-sm);
  }

  .action-card h3 {
    font-size: var(--font-size-xs);
  }

  .card-content {
    padding: 0.25rem 0;
    gap: 0.4rem;
  }

  .card-icon {
    margin-bottom: var(--space-xs);
  }
}

/* Scale action buttons container based on container size */
@container (min-width: 400px) {
  .action-buttons {
    flex-direction: row;
    justify-content: center;
    align-items: stretch; /* Changed from center to stretch for equal heights */
    gap: 2rem;
    height: auto;
    min-height: calc(
      100vh - env(safe-area-inset-top) - env(safe-area-inset-bottom) - 4rem
    );
    margin: 2rem auto;
  }
}

@container (min-width: 600px) {
  .action-buttons {
    gap: 2.5rem;
    padding: 0 2.5rem;
  }
}

@container (min-width: 800px) {
  .action-buttons {
    gap: 3rem;
    padding: 0 3rem;
  }
}

/* === 3. CONTAINER QUERY FALLBACKS === */
/* Fallback styles for browsers that don't support container queries */

@supports not (container-type: inline-size) {
  /* Fallback to viewport-based scaling for older browsers */
  @media (max-width: 25em) {
    /* 400px */
    .helper-modal {
      max-width: 350px;
      padding: var(--space-lg);
    }
  }

  @media (max-width: 23.4375em) {
    /* 375px */
    .helper-icon {
      width: var(--icon-sm);
      height: var(--icon-sm);
      font-size: var(--font-size-xs);
    }

    .helper-modal {
      max-width: 320px;
      padding: var(--space-md);
    }
  }
}

/* === 4. ACCESSIBILITY & USER PREFERENCES === */
/* Media queries for accessibility and user preference settings */

/* Reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
  .helper-icon {
    transition: none;
  }

  .helper-modal {
    animation: none;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .helper-modal {
    border-width: 2px;
    border-color: var(--text-primary);
  }
}

/* === 5. DEVICE-SPECIFIC OPTIMIZATIONS === */
/* Device-width/height and performance optimizations */

/* Mobile Layout with specific spacing */
@media (max-width: 767px) {
  .action-buttons {
    flex-direction: column;
    width: 100%;
    gap: 2rem;
    padding: 0 2rem;
    justify-content: space-evenly; /* Changed from space-between to space-evenly */
    align-items: stretch;
    /* Calculate height accounting for safe areas and margins */
    height: calc(
      100vh - env(safe-area-inset-top) - env(safe-area-inset-bottom) - 4rem
    );
    margin: 2rem 0;
    /* Ensure no overflow */
    overflow: hidden;
    min-height: 0;
  }

  .back-button {
    padding: 0.375rem 0.625rem;
    font-size: 0.8rem;
  }

  .modal-header .back-button {
    width: 2rem;
    height: 2rem;
  }

  .modal-header h2 {
    margin-left: -2rem; /* Adjust for smaller back button on mobile */
  }
}

/* Tablet responsive */
@media (min-width: 768px) and (max-width: 1023px) {
  .action-buttons {
    width: 100%;
    gap: 2.5rem;
    padding: 0 2.5rem;
  }
}

/* Desktop responsive */
@media (min-width: 1024px) {
  .action-buttons {
    gap: 3rem;
    padding: 0 3rem;
  }
}

/* Large screen responsive */
@media (min-width: 1280px) {
  .action-buttons {
    gap: 3.5rem;
    padding: 0 3.5rem;
  }
}

/* Extra large screen responsive */
@media (min-width: 1536px) {
  .action-buttons {
    gap: 4rem;
    padding: 0 4rem;
  }
}

/* Modal responsive optimizations */
@media (max-width: 768px) {
  .numeric-keypad {
    gap: var(--spacing-md);
  }

  .keypad-grid {
    max-width: 320px;
    min-width: 280px;
    gap: var(--spacing-sm);
  }

  .keypad-key {
    min-height: 65px;
    min-width: 65px;
    font-size: clamp(1.5rem, 1.3rem + 1.8vw, 2.25rem);
  }

  .pin-display {
    margin-bottom: var(--spacing-md);
  }

  .pin-dots {
    gap: var(--spacing-sm);
  }

  .pin-dot {
    width: 32px;
    height: 32px;
    font-size: var(--font-size-sm);
  }

  .modal-header {
    padding: var(--spacing-md) var(--spacing-lg);
  }

  .modal-header h2 {
    font-size: var(--font-size-xl);
  }

  .modal-content {
    padding: var(--spacing-lg);
  }

  .option-system {
    grid-template-columns: 1fr;
    gap: var(--spacing-sm);
  }

  .option-item {
    padding: var(--spacing-md);
    min-height: 70px;
  }

  .option-item .icon-left,
  .option-item .icon-right {
    width: 20px;
    height: 20px;
  }
}

@media (max-width: 480px) {
  .keypad-grid {
    max-width: 300px;
    min-width: 260px;
    gap: var(--spacing-xs);
  }

  .keypad-key {
    min-height: 60px;
    min-width: 60px;
    font-size: clamp(1.4rem, 1.2rem + 1.6vw, 2rem);
  }
}

/* Large screen optimizations */
@media (min-width: 1024px) {
  .keypad-grid {
    max-width: 500px;
    min-width: 400px;
  }

  .keypad-key {
    min-height: 70px;
    min-width: 70px;
    font-size: clamp(2rem, 1.8rem + 2.2vw, 3rem);
  }

  .pin-dot {
    width: 40px;
    height: 40px;
    font-size: var(--font-size-base);
  }
}

/* Form responsive design */
@media (max-width: 768px) {
  .form-group {
    margin-bottom: var(--spacing-md);
  }

  .form-input {
    padding: var(--spacing-sm);
    font-size: var(--font-size-sm);
  }

  .auth-actions {
    flex-direction: column;
    gap: var(--spacing-sm);
  }
}

/* Navigation responsive design */
@media (max-width: 48em) {
  .nav-container {
    padding: var(--space-sm) var(--space-md);
  }

  .nav-group {
    gap: var(--space-sm);
  }

  .nav-item {
    padding: var(--space-xs) var(--space-sm);
    font-size: var(--font-size-sm);
  }
}

/* === 6. PRINT & PERFORMANCE === */
/* Print styles and performance optimizations */

/* Card responsive design */
@media (max-width: 768px) {
  .source-options {
    grid-template-columns: 1fr;
  }

  .source-option {
    padding: var(--spacing-md);
  }

  .wallet-info {
    grid-template-columns: 1fr;
  }

  .mnemonic-words {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* Print styles */
@media print {
  .action-card::before {
    display: none !important;
  }

  .action-card {
    box-shadow: none !important;
    background: white !important;
    color: black !important;
    border: 1px solid black !important;
  }

  .helper-modal-overlay,
  .helper-icon {
    display: none !important;
  }

  .helper-modal {
    box-shadow: none !important;
    background: white !important;
    color: black !important;
    border: 1px solid black !important;
  }

  .text--primary,
  .text--secondary,
  .text--tertiary {
    color: black !important;
  }
}

/* Performance optimizations */
@media (prefers-reduced-data: reduce) {
  /* Reduce animations and effects for users with data constraints */
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }

  .helper-modal {
    animation: none;
  }
}

/* Enhanced accessibility features */
@media (prefers-reduced-motion: reduce) {
  /* Disable all animations for users who prefer reduced motion */
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  .helper-icon,
  .helper-modal,
  .action-card,
  .form-input {
    transition: none !important;
    animation: none !important;
  }
}

/* High contrast mode enhancements */
@media (prefers-contrast: high) {
  .helper-modal,
  .action-card {
    border-width: 2px;
    border-style: solid;
  }

  .text--secondary,
  .text--tertiary {
    color: var(--text-primary);
  }

  .helper-icon {
    border-width: 2px;
    background: var(--text-primary);
    color: var(--bg-primary);
  }

  .action-card:focus {
    outline: 3px solid currentColor;
    outline-offset: 3px;
  }

  /* Form input focus in high contrast mode */
  input:focus,
  textarea:focus,
  select:focus {
    outline: 3px solid currentColor;
    outline-offset: 3px;
  }
}

/* Focus management for keyboard navigation */
.helper-icon:focus {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
  border-color: var(--color-primary);
}

/* Ensure focus is visible in high contrast mode */
@media (prefers-contrast: high) {
  .helper-icon:focus {
    outline: 3px solid currentColor;
    outline-offset: 3px;
  }
}

/* Performance optimizations for low-end devices */
@media (max-device-width: 768px) and (max-device-height: 1024px) {
  /* Optimize for mobile devices */
  .helper-modal {
    /* Use transform3d to enable hardware acceleration */
    transform: translate3d(0, 0, 0);
    backface-visibility: hidden;
    perspective: 1000px;
  }
}

/* Resource optimization */
@media (prefers-reduced-transparency: reduce) {
  .helper-modal-overlay,
  .helper-modal {
    backdrop-filter: none;
    background-color: var(--bg-secondary);
  }
}

/* Memory optimization for large screens */
@media (min-width: 90em) {
  /* Limit maximum sizes to prevent excessive memory usage */
  .helper-modal {
    max-width: 650px;
  }

  .container {
    max-width: 1400px;
  }
}
